(this["webpackJsonpstreamer-2"]=this["webpackJsonpstreamer-2"]||[]).push([[0],{101:function(n,e,r){"use strict";r.r(e);var t=r(0),c=r.n(t),i=r(51),u=r.n(i),a=(r(57),r(16)),o=r.n(a),s=r(25),l=(r(59),r(52)),d=r.n(l),f=r(17),p=r.n(f),g=r(6);var v=function(){var n=Object(t.useRef)(),e=Object(t.useRef)(),r=Object(t.useRef)(),c=Object(t.useRef)(),i=Object(t.useRef)([]),u=Object(t.useRef)([]),a="room";function l(e,t,c){var i=new p.a({initiator:!0,trickle:!1,stream:c});return i.on("signal",(function(r){n.current.emit("sending signal",{userToSignal:e,callerID:t,signal:r})})),i.on("stream",(function(n){r.current.srcObject=n,r.current.addEventListener("loadedmetadata",(function(){try{r.current.play()}catch(n){}window.addEventListener("mousedown",(function(){r.current.play()}))}))})),i}function f(e,r,t){var i=new p.a({initiator:!0,trickle:!1,stream:t});return i.on("signal",(function(t){n.current.emit("sending audio signal",{userToSignal:e,callerID:r,signal:t})})),i.on("stream",function(){var n=Object(s.a)(o.a.mark((function n(e){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c.current.srcObject=e,c.current.addEventListener("loadedmetadata",(function(){try{c.current.play()}catch(n){}window.addEventListener("mousedown",(function(){c.current.play()}))}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),i}function v(e,t,c){var i=new p.a({initiator:!1,trickle:!1,stream:c});return i.on("signal",(function(e){n.current.emit("returning signal",{signal:e,callerID:t})})),i.on("stream",(function(n){r.current.srcObject=n,r.current.addEventListener("loadedmetadata",(function(){try{r.current.play()}catch(n){}window.addEventListener("mousedown",(function(){r.current.play()}))}))})),i.signal(e),i}function m(e,r,t){var i=new p.a({initiator:!1,trickle:!1,stream:t});return i.on("signal",(function(e){n.current.emit("returning audio signal",{signal:e,callerID:r})})),i.on("stream",function(){var n=Object(s.a)(o.a.mark((function n(e){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c.current.srcObject=e,c.current.addEventListener("loadedmetadata",(function(){try{c.current.play()}catch(n){}window.addEventListener("mousedown",(function(){c.current.play()}))}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),i.signal(e),i}return Object(t.useEffect)((function(){n.current=d.a.connect("/")}),[]),Object(g.jsxs)("div",{className:"App",children:[Object(g.jsxs)("div",{className:"container",ref:e,children:[Object(g.jsx)("button",{className:"btn",definer:"stream",onClick:function(){e.current.style.display="none",navigator.mediaDevices.getDisplayMedia({cursor:!0}).then((function(e){n.current.on("all users",(function(r){r.forEach((function(r){console.log(r);var t=l(r,n.current.id,e);i.current.push({peerID:r,peer:t})}))})),n.current.on("user joined",(function(n){var r=v(n.signal,n.callerID,e);i.current.push({peerID:n.callerID,peer:r})})),n.current.on("receiving returned signal",(function(n){i.current.find((function(e){return e.peerID===n.id})).peer.signal(n.signal)}))})),navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){c.current.srcObject=e,c.current.muted="true",n.current.emit("join room",a),n.current.on("all users",(function(r){r.forEach((function(r){console.log(r);var t=f(r,n.current.id,e);u.current.push({peerID:r,peer:t})}))})),n.current.on("user joined audio",(function(n){var r=m(n.signal,n.callerID,e);u.current.push({peerID:n.callerID,peer:r})})),n.current.on("receiving returned audio signal",(function(n){u.current.find((function(e){return e.peerID===n.id})).peer.signal(n.signal)}))})),n.current.emit("join room",a),n.current.on("all users",(function(e){e.forEach((function(e){console.log(e);var r=l(e,n.current.id,"");i.current.push({peerID:e,peer:r})}))})),n.current.on("user joined",(function(n){var e=v(n.signal,n.callerID,"");i.current.push({peerID:n.callerID,peer:e})})),n.current.on("receiving returned signal",(function(n){i.current.find((function(e){return e.peerID===n.id})).peer.signal(n.signal)})),n.current.on("all users",(function(e){e.forEach((function(e){console.log(e);var r=f(e,n.current.id,"");u.current.push({peerID:e,peer:r})}))})),n.current.on("user joined audio",(function(n){var e=m(n.signal,n.callerID,"");u.current.push({peerID:n.callerID,peer:e})})),n.current.on("receiving returned audio signal",(function(n){u.current.find((function(e){return e.peerID===n.id})).peer.signal(n.signal)}))},children:"Stream"}),Object(g.jsx)("button",{className:"btn",definer:"watch",onClick:function(){e.current.style.display="none",r.current.style.display="flex",n.current.emit("join room",a),n.current.on("all users",(function(e){e.forEach((function(e){console.log(e);var r=l(e,n.current.id,"");i.current.push({peerID:e,peer:r})}))})),n.current.on("user joined",(function(n){var e=v(n.signal,n.callerID,"");i.current.push({peerID:n.callerID,peer:e})})),n.current.on("receiving returned signal",(function(n){i.current.find((function(e){return e.peerID===n.id})).peer.signal(n.signal)})),n.current.on("all users",(function(e){e.forEach((function(e){console.log(e);var r=f(e,n.current.id,"");u.current.push({peerID:e,peer:r})}))})),n.current.on("user joined audio",(function(n){var e=m(n.signal,n.callerID,"");u.current.push({peerID:n.callerID,peer:e})})),n.current.on("receiving returned audio signal",(function(n){u.current.find((function(e){return e.peerID===n.id})).peer.signal(n.signal)}))},children:"Watch"})]}),Object(g.jsx)("video",{className:"video",controls:!0,ref:r}),Object(g.jsx)("audio",{className:"audio",controls:!0,ref:c})]})};u.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(v,{})}),document.getElementById("root"))},57:function(n,e,r){},59:function(n,e,r){},90:function(n,e){},92:function(n,e){}},[[101,1,2]]]);
//# sourceMappingURL=main.47aeb060.chunk.js.map